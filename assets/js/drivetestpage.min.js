(()=>{"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function a(e,a,n){return(a=function(e){var a=function(e){if("object"!=t(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(a)?a:a+""}(a))in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}e.n=t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},e.d=(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const n=React;var l=e.n(n);const s=wp.i18n,r=wp.apiFetch;var i=e.n(r);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=()=>{const[e,t]=(0,n.useState)({clientId:"",clientSecret:""}),[a,r]=(0,n.useState)(!1),[o,u]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),[p,g]=(0,n.useState)(""),[v,_]=(0,n.useState)(!1),[w,f]=(0,n.useState)(!1),[E,h]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[N,S]=(0,n.useState)(""),[P,C]=(0,n.useState)(null),[D,k]=(0,n.useState)([]),[F,O]=(0,n.useState)({currentPage:1,pageSize:20,totalPages:1,hasNextPage:!1,hasPreviousPage:!1,nextPageToken:null,totalFiles:0}),[T,x]=(0,n.useState)({}),[j,I]=(0,n.useState)(!1),[A,L]=(0,n.useState)(!1),R=(0,n.useRef)(null),[G,M]=(0,n.useState)(null),[z,q]=(0,n.useState)(!1),[U,B]=(0,n.useState)(!1),[V,H]=(0,n.useState)(!1),[X,Y]=(0,n.useState)(null),[J,K]=(0,n.useState)({}),W=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{await Q(),g(window.location.origin+"/wp-admin/admin.php?page=wpmudev_plugintest_drive")})()},[]),(0,n.useEffect)(()=>{v&&e.clientId&&e.clientSecret?Z():v&&(r(!1),m(!1))},[v,e.clientId,e.clientSecret]),(0,n.useEffect)(()=>{a&&$()},[a,F.currentPage,F.pageSize,P]);const Q=async()=>{try{const n=await i()({path:"/wpmudev/v1/drive/credentials",method:"GET"});if(n.success){var e,a;const l={clientId:(null===(e=n.data)||void 0===e?void 0:e.clientId)||"",clientSecret:(null===(a=n.data)||void 0===a?void 0:a.clientSecret)||""};""!==l.clientId.trim()&&""!==l.clientSecret.trim()?(t(l),f(!0)):(t({clientId:"",clientSecret:""}),f(!1))}}catch(e){console.error("Error loading credentials:",e)}finally{_(!0)}},Z=async()=>{m(!0);try{const e=await i()({path:"/wpmudev/v1/drive/auth-status",method:"GET"});e.success&&r(e.authenticated)}catch(e){console.error("Error checking auth status:",e),r(!1)}finally{m(!1)}},$=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F.currentPage,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a){K(e=>c(c({},e),{},{files:!0}));try{const a=new URLSearchParams({page:e.toString(),page_size:F.pageSize.toString(),folder_id:P||""});t&&a.append("page_token",t);const n=await i()({path:"/wpmudev/v1/drive/files?".concat(a.toString()),method:"GET"});n.success?(h(n.files||[]),O(t=>{var a,l,s,r,i,o;return c(c({},t),{},{currentPage:(null===(a=n.pagination)||void 0===a?void 0:a.currentPage)||e,totalPages:(null===(l=n.pagination)||void 0===l?void 0:l.totalPages)||1,hasNextPage:(null===(s=n.pagination)||void 0===s?void 0:s.hasNextPage)||!1,hasPreviousPage:(null===(r=n.pagination)||void 0===r?void 0:r.hasPreviousPage)||!1,nextPageToken:(null===(i=n.pagination)||void 0===i?void 0:i.nextPageToken)||null,totalFiles:(null===(o=n.pagination)||void 0===o?void 0:o.totalFiles)||0})})):ae("error",n.message||(0,s.__)("Failed to load files","wpmudev-plugin-test"))}catch(e){console.error("Error loading files:",e),"no_access_token"===e.code||401===e.status?(ae("error",(0,s.__)("Session expired. Please authenticate again.","wpmudev-plugin-test")),ee()):ae("error",(0,s.__)("Error loading files:","wpmudev-plugin-test")+" "+e.message)}finally{K(e=>c(c({},e),{},{files:!1}))}}},ee=async()=>{u(!0);try{const e=await i()({path:"/wpmudev/v1/drive/disconnect",method:"POST"});e.success?(r(!1),h([]),O({currentPage:1,totalPages:1,hasNextPage:!1,hasPreviousPage:!1,nextPageToken:null,totalFiles:0}),ae("success",(0,s.__)("Disconnected from Google Drive","wpmudev-plugin-test"))):ae("error",e.message||(0,s.__)("Failed to disconnect","wpmudev-plugin-test"))}catch(e){ae("error",(0,s.__)("Error disconnecting:","wpmudev-plugin-test")+" "+e.message)}finally{u(!1)}},te=async e=>{I(!0),x({});try{for(let a=0;a<e.length;a++){var t;const n=e[a],r=new FormData;r.append("file",n),x(e=>c(c({},e),{},{[n.name]:{progress:0,status:"uploading"}}));const i=new XMLHttpRequest;i.upload.addEventListener("progress",e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);x(e=>c(c({},e),{},{[n.name]:{progress:t,status:"uploading"}}))}}),i.addEventListener("load",()=>{i.status>=200&&i.status<300?JSON.parse(i.responseText).success?(x(e=>c(c({},e),{},{[n.name]:{progress:100,status:"completed"}})),l()):(x(e=>c(c({},e),{},{[n.name]:{progress:0,status:"error"}})),l()):401===i.status&&(x(e=>c(c({},e),{},{[n.name]:{progress:0,status:"error"}})),ae("error",(0,s.__)("Session expired. Please authenticate again.","wpmudev-plugin-test")),ee(),l())}),i.addEventListener("error",()=>{x(e=>c(c({},e),{},{[n.name]:{progress:0,status:"error"}})),l()}),i.open("POST","/wp-json/wpmudev/v1/drive/upload"),i.setRequestHeader("X-WP-Nonce",(null===(t=window.wpmudevDriveTest)||void 0===t?void 0:t.nonce)||""),i.send(r)}let a=0;const n=e.length,l=()=>{a++,a===n&&($(),x({}),ae("success",(0,s.__)("Files uploaded successfully!","wpmudev-plugin-test")))}}catch(e){ae("error",(0,s.__)("Error uploading files:","wpmudev-plugin-test")+" "+e.message)}finally{I(!1)}},ae=(e,t)=>{M({type:e,message:t}),setTimeout(()=>M(null),5e3)},ne=e=>{C(e),O(e=>c(c({},e),{},{currentPage:1})),$(1)};return l().createElement("div",{className:"google-drive-admin"},G&&l().createElement("div",{className:"notice notice-".concat(G.type," is-dismissible")},l().createElement("p",null,G.message),l().createElement("button",{type:"button",className:"notice-dismiss",onClick:()=>M(null)},l().createElement("span",{className:"screen-reader-text"},"Dismiss this notice."))),!v&&l().createElement("div",{className:"google-drive-section"},l().createElement("div",{className:"google-drive-section-body"},l().createElement("div",{className:"loading-spinner"},l().createElement("div",{className:"spinner"}),l().createElement("p",null,(0,s.__)("Loading...","wpmudev-plugin-test"))))),v&&!w&&l().createElement("div",{className:"google-drive-section"},l().createElement("div",{className:"google-drive-section-header"},l().createElement("h2",null,(0,s.__)("Google Drive Credentials","wpmudev-plugin-test"))),l().createElement("div",{className:"google-drive-section-body"},l().createElement("form",{onSubmit:async t=>{t.preventDefault(),u(!0);try{var a;const t=await i()({path:"/wpmudev/v1/drive/save-credentials",method:"POST",data:{client_id:e.clientId,client_secret:e.clientSecret,_wpnonce:(null===(a=window.wpmudevDriveTest)||void 0===a?void 0:a.nonce)||""}});t.success?(f(!0),ae("success",(0,s.__)("Credentials saved successfully!","wpmudev-plugin-test")),Z()):ae("error",t.message||(0,s.__)("Failed to save credentials","wpmudev-plugin-test"))}catch(e){ae("error",(0,s.__)("Error saving credentials:","wpmudev-plugin-test")+" "+e.message)}finally{u(!1)}},className:"credentials-form"},l().createElement("div",{className:"credential-field"},l().createElement("label",{htmlFor:"client-id"},(0,s.__)("Client ID","wpmudev-plugin-test")),l().createElement("input",{type:"text",id:"client-id",value:e.clientId,onChange:a=>t(c(c({},e),{},{clientId:a.target.value})),placeholder:(0,s.__)("Enter Client ID","wpmudev-plugin-test"),required:!0})),l().createElement("div",{className:"credential-field"},l().createElement("label",{htmlFor:"client-secret"},(0,s.__)("Client Secret","wpmudev-plugin-test")),l().createElement("input",{type:"password",id:"client-secret",value:e.clientSecret,onChange:a=>t(c(c({},e),{},{clientSecret:a.target.value})),placeholder:(0,s.__)("Enter Client Secret","wpmudev-plugin-test"),required:!0})),l().createElement("div",{className:"credential-field"},l().createElement("button",{type:"submit",className:"button-primary",disabled:o},o?(0,s.__)("Saving...","wpmudev-plugin-test"):(0,s.__)("Save Credentials","wpmudev-plugin-test")))),l().createElement("div",{className:"redirect-uri-info"},l().createElement("h4",null,(0,s.__)("Redirect URI Configuration","wpmudev-plugin-test")),l().createElement("p",null,(0,s.__)("Add this exact URL to your Google Cloud Console OAuth 2.0 Client configuration:","wpmudev-plugin-test")),l().createElement("div",{className:"redirect-uri-code"},p)),l().createElement("div",{className:"oauth-scopes"},l().createElement("h4",null,(0,s.__)("Required OAuth Scopes","wpmudev-plugin-test")),l().createElement("p",null,(0,s.__)("This plugin requires the following Google Drive API permissions:","wpmudev-plugin-test")),l().createElement("ul",{className:"scope-list"},l().createElement("li",null,l().createElement("strong",null,"https://www.googleapis.com/auth/drive.file")," - ",(0,s.__)("Drive File Access","wpmudev-plugin-test")),l().createElement("li",null,l().createElement("strong",null,"https://www.googleapis.com/auth/drive.readonly")," - ",(0,s.__)("Drive Read-Only Access","wpmudev-plugin-test")))))),v&&w&&l().createElement("div",{className:"google-drive-section"},l().createElement("div",{className:"google-drive-section-header"},l().createElement("h2",null,(0,s.__)("Authentication Status","wpmudev-plugin-test"))),l().createElement("div",{className:"google-drive-section-body"},l().createElement("div",{className:"auth-status ".concat(d?"checking":a?"authenticated":"not-authenticated")},l().createElement("span",{className:"auth-status-icon"},d?"â³":a?"âœ…":"âŒ"),d?(0,s.__)("Checking connection...","wpmudev-plugin-test"):a?(0,s.__)("Connected to Google Drive","wpmudev-plugin-test"):(0,s.__)("Not connected to Google Drive","wpmudev-plugin-test")),l().createElement("div",{className:"auth-actions"},a?l().createElement("button",{onClick:ee,className:"button-secondary",disabled:o||d},o?(0,s.__)("Disconnecting...","wpmudev-plugin-test"):(0,s.__)("Disconnect","wpmudev-plugin-test")):l().createElement("button",{onClick:async()=>{u(!0);try{const e=await i()({path:"/wpmudev/v1/drive/authenticate",method:"POST"});if(e.success&&e.auth_url){const t=window.open(e.auth_url,"google-auth","width=500,height=600,scrollbars=yes,resizable=yes"),a=setInterval(()=>{t.closed&&(clearInterval(a),Z(),$())},1e3)}else ae("error",e.message||(0,s.__)("Failed to initiate authentication","wpmudev-plugin-test"))}catch(e){ae("error",(0,s.__)("Error authenticating:","wpmudev-plugin-test")+" "+e.message)}finally{u(!1)}},className:"button-primary",disabled:o||d},o?(0,s.__)("Authenticating...","wpmudev-plugin-test"):(0,s.__)("Authenticate with Google Drive","wpmudev-plugin-test")),l().createElement("button",{onClick:async()=>{u(!0);try{var e;const a=await i()({path:"/wpmudev/v1/drive/clear-credentials",method:"POST",data:{_wpnonce:(null===(e=window.wpmudevDriveTest)||void 0===e?void 0:e.nonce)||""}});a.success?(t({clientId:"",clientSecret:""}),f(!1),r(!1),h([]),O({currentPage:1,totalPages:1,hasNextPage:!1,hasPreviousPage:!1,nextPageToken:null,totalFiles:0}),ae("success",(0,s.__)("App configuration cleared. You can now reconfigure your app.","wpmudev-plugin-test"))):ae("error",a.message||(0,s.__)("Failed to clear configuration","wpmudev-plugin-test"))}catch(e){ae("error",(0,s.__)("Error clearing configuration:","wpmudev-plugin-test")+" "+e.message)}finally{u(!1)}},className:"button-secondary",disabled:o||d},(0,s.__)("Reconfigure App","wpmudev-plugin-test"))))),a&&l().createElement(l().Fragment,null,l().createElement("div",{className:"google-drive-section"},l().createElement("div",{className:"google-drive-section-header"},l().createElement("h2",null,(0,s.__)("File Management","wpmudev-plugin-test"))),l().createElement("div",{className:"google-drive-section-body"},l().createElement("div",{className:"file-toolbar"},l().createElement("div",{className:"toolbar-left"},l().createElement("button",{onClick:()=>q(!0),className:"button-primary"},(0,s.__)("Upload Files","wpmudev-plugin-test")),l().createElement("button",{onClick:()=>B(!0),className:"button-secondary"},(0,s.__)("Create Folder","wpmudev-plugin-test")),y.length>0&&l().createElement("button",{onClick:()=>H(!0),className:"button-danger"},(0,s.__)("Delete Selected","wpmudev-plugin-test")," (",y.length,")")),l().createElement("div",{className:"toolbar-right"},l().createElement("select",{value:F.pageSize,onChange:e=>{O(t=>c(c({},t),{},{pageSize:parseInt(e.target.value),currentPage:1}))},className:"sort-select"},l().createElement("option",{value:"5"},(0,s.__)("5 per page","wpmudev-plugin-test")),l().createElement("option",{value:"10"},(0,s.__)("10 per page","wpmudev-plugin-test")),l().createElement("option",{value:"20"},(0,s.__)("20 per page","wpmudev-plugin-test")),l().createElement("option",{value:"50"},(0,s.__)("50 per page","wpmudev-plugin-test")),l().createElement("option",{value:"100"},(0,s.__)("100 per page","wpmudev-plugin-test"))))))),D.length>0&&l().createElement("div",{className:"google-drive-section"},l().createElement("div",{className:"breadcrumbs"},l().createElement("button",{onClick:()=>ne(null)},(0,s.__)("Drive Root","wpmudev-plugin-test")),D.map((e,t)=>l().createElement(l().Fragment,{key:e.id},l().createElement("span",{className:"breadcrumb-separator"},"/"),l().createElement("button",{onClick:()=>ne(e.id)},e.name))))),l().createElement("div",{className:"google-drive-section"},l().createElement("div",{className:"google-drive-section-header"},l().createElement("h2",null,(0,s.__)("Your Drive Files","wpmudev-plugin-test")),E.length>0&&l().createElement("div",{className:"pagination-controls"},l().createElement("button",{onClick:()=>$(F.currentPage-1),disabled:F.currentPage<=1||J.files,className:"pagination-btn"},(0,s.__)("Previous","wpmudev-plugin-test")),l().createElement("div",{className:"pagination-info"},(0,s.__)("Page","wpmudev-plugin-test")," ",F.currentPage),l().createElement("button",{onClick:()=>$(F.currentPage+1),disabled:J.files,className:"pagination-btn"},(0,s.__)("Next","wpmudev-plugin-test")))),l().createElement("div",{className:"google-drive-section-body"},J.files?l().createElement("div",{className:"loading-spinner"},l().createElement("div",{className:"spinner"}),l().createElement("p",null,(0,s.__)("Loading files...","wpmudev-plugin-test"))):l().createElement("div",{className:"files-container list"},0===E.length?l().createElement("div",{className:"no-files"},(0,s.__)("No files found in your Drive. Upload a file or create a folder to get started.","wpmudev-plugin-test")):E.map((e,t)=>{return l().createElement("div",{key:e.id||t,className:"file-item ".concat(y.includes(e.id)?"selected":"")},l().createElement("div",{className:"file-checkbox"},l().createElement("input",{type:"checkbox",checked:y.includes(e.id),onChange:()=>{return t=e.id,void b(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}})),l().createElement("div",{className:"file-icon",onClick:()=>"application/vnd.google-apps.folder"===e.mimeType?ne(e.id):null},(a=e.mimeType).includes("folder")?"ðŸ“":a.includes("image")?"ðŸ–¼ï¸":a.includes("video")?"ðŸŽ¥":a.includes("audio")?"ðŸŽµ":a.includes("pdf")?"ðŸ“„":a.includes("document")?"ðŸ“":a.includes("spreadsheet")?"ðŸ“Š":a.includes("presentation")?"ðŸ“½ï¸":"ðŸ“„"),l().createElement("div",{className:"file-info"},l().createElement("div",{className:"file-name",onClick:()=>"application/vnd.google-apps.folder"===e.mimeType?ne(e.id):null},e.name),l().createElement("div",{className:"file-meta"},"application/vnd.google-apps.folder"!==e.mimeType&&(e=>{if(!e)return"Unknown size";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]})(e.size)," â€¢ ",(e=>{const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()})(e.modifiedTime))),l().createElement("div",{className:"file-actions"},"application/vnd.google-apps.folder"!==e.mimeType?l().createElement(l().Fragment,null,l().createElement("a",{href:e.webViewLink,target:"_blank",rel:"noopener noreferrer",className:"file-action-btn"},(0,s.__)("View in Drive","wpmudev-plugin-test")),l().createElement("a",{href:e.webContentLink,download:!0,className:"file-action-btn"},(0,s.__)("Download","wpmudev-plugin-test"))):l().createElement("a",{href:e.webViewLink,target:"_blank",rel:"noopener noreferrer",className:"file-action-btn"},(0,s.__)("View in Drive","wpmudev-plugin-test"))));var a}))))),z&&l().createElement("div",{className:"modal-overlay"},l().createElement("div",{className:"modal-content"},l().createElement("div",{className:"modal-header"},l().createElement("h3",null,(0,s.__)("Upload Files","wpmudev-plugin-test")),l().createElement("button",{onClick:()=>q(!1),className:"modal-close"},"Ã—")),l().createElement("div",{className:"modal-body"},l().createElement("div",{className:"upload-area ".concat(A?"drag-active":""),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),L(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),L(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),L(!1);const t=Array.from(e.dataTransfer.files);t.length>0&&te(t)},ref:W},l().createElement("div",{className:"upload-icon"},"ðŸ“"),l().createElement("div",{className:"upload-text"},(0,s.__)("Drag and drop files here or click to select","wpmudev-plugin-test")),l().createElement("input",{type:"file",ref:R,onChange:e=>{const t=Array.from(e.target.files);t.length>0&&te(t)},multiple:!0,style:{display:"none"}}),l().createElement("button",{onClick:()=>{var e;return null===(e=R.current)||void 0===e?void 0:e.click()},className:"button-primary"},(0,s.__)("Select Files","wpmudev-plugin-test"))),Object.keys(T).length>0&&l().createElement("div",{className:"upload-progress-list"},Object.entries(T).map(e=>{let[t,a]=e;return l().createElement("div",{key:t,className:"upload-progress-item"},l().createElement("div",{className:"progress-file-name"},t),l().createElement("div",{className:"progress-bar"},l().createElement("div",{className:"progress-fill",style:{width:"".concat(a.progress,"%")}})),l().createElement("div",{className:"progress-status"},"completed"===a.status?"âœ…":"error"===a.status?"âŒ":"".concat(a.progress,"%")))}))))),U&&l().createElement("div",{className:"modal-overlay"},l().createElement("div",{className:"modal-content"},l().createElement("div",{className:"modal-header"},l().createElement("h3",null,(0,s.__)("Create New Folder","wpmudev-plugin-test")),l().createElement("button",{onClick:()=>B(!1),className:"modal-close"},"Ã—")),l().createElement("div",{className:"modal-body"},l().createElement("form",{onSubmit:async e=>{if(e.preventDefault(),N.trim()){u(!0);try{const e=await i()({path:"/wpmudev/v1/drive/create-folder",method:"POST",data:{name:N.trim(),parent_id:P}});e.success?(ae("success",(0,s.__)("Folder created successfully!","wpmudev-plugin-test")),S(""),B(!1),$()):ae("error",e.message||(0,s.__)("Failed to create folder","wpmudev-plugin-test"))}catch(e){ae("error",(0,s.__)("Error creating folder:","wpmudev-plugin-test")+" "+e.message)}finally{u(!1)}}}},l().createElement("div",{className:"form-field"},l().createElement("label",{htmlFor:"folder-name"},(0,s.__)("Folder Name","wpmudev-plugin-test")),l().createElement("input",{type:"text",id:"folder-name",value:N,onChange:e=>S(e.target.value),placeholder:(0,s.__)("Enter folder name","wpmudev-plugin-test"),required:!0,autoFocus:!0})),l().createElement("div",{className:"form-actions"},l().createElement("button",{type:"button",onClick:()=>B(!1),className:"button-secondary"},(0,s.__)("Cancel","wpmudev-plugin-test")),l().createElement("button",{type:"submit",className:"button-primary",disabled:o||!N.trim()},o?(0,s.__)("Creating...","wpmudev-plugin-test"):(0,s.__)("Create Folder","wpmudev-plugin-test"))))))),V&&l().createElement("div",{className:"modal-overlay"},l().createElement("div",{className:"modal-content"},l().createElement("div",{className:"modal-header"},l().createElement("h3",null,(0,s.__)("Delete Files","wpmudev-plugin-test")),l().createElement("button",{onClick:()=>H(!1),className:"modal-close"},"Ã—")),l().createElement("div",{className:"modal-body"},l().createElement("p",null,(0,s.__)("Are you sure you want to delete the selected files? This action cannot be undone.","wpmudev-plugin-test")),l().createElement("div",{className:"form-actions"},l().createElement("button",{type:"button",onClick:()=>H(!1),className:"button-secondary"},(0,s.__)("Cancel","wpmudev-plugin-test")),l().createElement("button",{onClick:async()=>{if(0!==y.length){u(!0);try{const e=await i()({path:"/wpmudev/v1/drive/delete-files",method:"POST",data:{file_ids:y}});e.success?(ae("success",(0,s.__)("Files deleted successfully!","wpmudev-plugin-test")),b([]),H(!1),$()):ae("error",e.message||(0,s.__)("Failed to delete files","wpmudev-plugin-test"))}catch(e){ae("error",(0,s.__)("Error deleting files:","wpmudev-plugin-test")+" "+e.message)}finally{u(!1)}}},className:"button-danger",disabled:o},o?(0,s.__)("Deleting...","wpmudev-plugin-test"):(0,s.__)("Delete Files","wpmudev-plugin-test")))))))};if("undefined"!=typeof window&&window.wpmudevDriveTest){const{dom_element_id:e}=window.wpmudevDriveTest,t=document.getElementById(e);if(t){const{createElement:e,render:a}=window.wp.element;a(e(u),t)}}})();